<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                template="./../newTemplate.xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://java.sun.com/jsf/core">

    <ui:define name="title">
        Cadastro de Acesso (Novo)
    </ui:define>

    <ui:define name="content">
        <h2>Acesso</h2>
        <h:form id="frmTabela" prependId="false">
            <f:validateBean> 
                <p:messages id="msgs"  autoUpdate="true"/>                
                <p:hotkey bind="F1" update="frmTabela" action="#{acessoControlador.calcularTroco()}" immediate="false"/>
                <p:panel style="width:100%; height: 100%">
                    <h:panelGrid columns="2">

                        <h:panelGrid columns="2">
                            <h:outputText value="Cartão"/>
                            <p:inputText value="#{acessoControlador.selectedObject.cartao}" size="40" />                                                                               

                            <h:outputText value="Tabela"/>
                            <h:selectOneMenu id="tabelaId" value="#{acessoControlador.selectedObject.tabela}" title="Tabela" >
                                <f:selectItems value="#{tabelaControlador.tabelasSelectOne}"/>
                            </h:selectOneMenu>

                            <h:outputText value="Desconto"/>
                            <p:inputText value="#{acessoControlador.selectedObject.desconto}" id="txtDesconto" size="40">
                                <f:convertNumber pattern="#,###,##0.00"/>
                            </p:inputText> 

                            <h:outputText value="Valor recebido"/>
                            <p:inputText value="#{acessoControlador.selectedObject.valorRecebido}" id="txtValorRecebido" size="40">
                                <f:convertNumber pattern="#,###,##0.00"/>
                            </p:inputText>                         

                            <h:outputText value="Placa do veículo"/>
                            <p:inputText value="#{acessoControlador.selectedObject.placaVeiculo}" size="40" />

                            <p:defaultCommand target="btnConsultar" />
                            <h:panelGrid columns="3">                                                               
                                <p:commandButton style="height: 80px; width: 100px;" action="#{acessoControlador.consultarCartao()}"  value="Consultar" id="btnConsultar" immediate="false" ajax="false"/>                
                                <p:commandButton style="height: 80px; width: 100px;" action="#{acessoControlador.calcularTroco()}"  value="Calcular troco" immediate="false" ajax="false"/>  
                                <p:commandButton style="height: 80px; width: 100px;" action="#{acessoControlador.salvar()}" value="Imprimir">
                                    <p:printer target="cupom" />
                                </p:commandButton>
                            </h:panelGrid>


                        </h:panelGrid>

                        <p:panel header="Informações para Imprimir" style="width:100%; height: 100%">
                            <h:panelGrid columns="2" id="cupom">
                                <h:outputText value="Entrada"/>
                                <p:outputLabel value="#{acessoControlador.selectedObject.entrada}" >
                                    <f:convertDateTime pattern="dd/MM/yyyy HH:mm" timeZone="GMT-03:00"/>
                                </p:outputLabel>

                                <h:outputText value="Saída"/>
                                <p:outputLabel value="#{acessoControlador.selectedObject.registroSaida}" >
                                    <f:convertDateTime pattern="dd/MM/yyyy HH:mm" timeZone="GMT-03:00"/>
                                </p:outputLabel>

                                <h:outputText value="Permanência"/>
                                <p:outputLabel value="#{acessoControlador.selectedObject.permancencia}" >                        
                                </p:outputLabel>

                                <h:outputText value="Valor cobrado"/>
                                <p:outputLabel value="#{acessoControlador.selectedObject.valorCobrado}">
                                    <f:convertNumber pattern="#,###,##0.00"/>
                                </p:outputLabel>                                  

                                <h:outputText value="Desconto"/>
                                <p:outputLabel value="#{acessoControlador.selectedObject.desconto}">
                                    <f:convertNumber pattern="#,###,##0.00"/>
                                </p:outputLabel> 

                                <h:outputText value="Valor cobrado"/>
                                <p:outputLabel value="#{acessoControlador.selectedObject.valorAReceber}">
                                    <f:convertNumber pattern="#,###,##0.00"/>
                                </p:outputLabel>

                                <h:outputText value="Valor a receber"/>
                                <p:outputLabel value="#{acessoControlador.selectedObject.valorRecebido}">
                                    <f:convertNumber pattern="#,###,##0.00"/>
                                </p:outputLabel>

                                <h:outputText value="Troco"/>
                                <p:outputLabel value="#{acessoControlador.selectedObject.troco}" id="txtTroco" >
                                    <f:convertNumber pattern="#,###,##0.00"/>
                                </p:outputLabel>

                                <h:outputText value="Placa do veículo"/>
                                <p:outputLabel value="#{acessoControlador.selectedObject.placaVeiculo}" />
                            </h:panelGrid>
                        </p:panel>
                    </h:panelGrid>

                    <f:facet name="footer">

                    </f:facet>
                </p:panel>

            </f:validateBean>
        </h:form>
    </ui:define>
</ui:composition>
